"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/babeldoc-translate/route";
exports.ids = ["app/api/babeldoc-translate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbabeldoc-translate%2Froute&page=%2Fapi%2Fbabeldoc-translate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbabeldoc-translate%2Froute.ts&appDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbabeldoc-translate%2Froute&page=%2Fapi%2Fbabeldoc-translate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbabeldoc-translate%2Froute.ts&appDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jobssu_Desktop_myhos_pdf_translator_src_app_api_babeldoc_translate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/babeldoc-translate/route.ts */ \"(rsc)/./src/app/api/babeldoc-translate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/babeldoc-translate/route\",\n        pathname: \"/api/babeldoc-translate\",\n        filename: \"route\",\n        bundlePath: \"app/api/babeldoc-translate/route\"\n    },\n    resolvedPagePath: \"/Users/jobssu/Desktop/myhos/pdf-translator/src/app/api/babeldoc-translate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jobssu_Desktop_myhos_pdf_translator_src_app_api_babeldoc_translate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/babeldoc-translate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiYWJlbGRvYy10cmFuc2xhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmJhYmVsZG9jLXRyYW5zbGF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmJhYmVsZG9jLXRyYW5zbGF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmpvYnNzdSUyRkRlc2t0b3AlMkZteWhvcyUyRnBkZi10cmFuc2xhdG9yJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmpvYnNzdSUyRkRlc2t0b3AlMkZteWhvcyUyRnBkZi10cmFuc2xhdG9yJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrQztBQUMvRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BkZi10cmFuc2xhdG9yLz84ODc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9qb2Jzc3UvRGVza3RvcC9teWhvcy9wZGYtdHJhbnNsYXRvci9zcmMvYXBwL2FwaS9iYWJlbGRvYy10cmFuc2xhdGUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2JhYmVsZG9jLXRyYW5zbGF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2JhYmVsZG9jLXRyYW5zbGF0ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYmFiZWxkb2MtdHJhbnNsYXRlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2pvYnNzdS9EZXNrdG9wL215aG9zL3BkZi10cmFuc2xhdG9yL3NyYy9hcHAvYXBpL2JhYmVsZG9jLXRyYW5zbGF0ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYmFiZWxkb2MtdHJhbnNsYXRlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbabeldoc-translate%2Froute&page=%2Fapi%2Fbabeldoc-translate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbabeldoc-translate%2Froute.ts&appDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/babeldoc-translate/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/babeldoc-translate/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var _lib_server_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/server-utils */ \"(rsc)/./src/lib/server-utils.ts\");\n\n\n\n\n\n\n\nasync function POST(request) {\n    try {\n        // 检查 Python 和 pip 是否已安装\n        const pythonInstalled = await (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_5__.checkPythonInstallation)();\n        if (!pythonInstalled) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"未安装 Python，请先安装 Python 3.8 或更高版本\"\n            }, {\n                status: 500\n            });\n        }\n        const pipInstalled = await (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_5__.checkPipInstallation)();\n        if (!pipInstalled) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"未安装 pip，请先安装 pip\"\n            }, {\n                status: 500\n            });\n        }\n        // 检查 babeldoc 是否已安装\n        let babelDocInstalled = await (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_5__.checkBabelDocInstallation)();\n        if (!babelDocInstalled) {\n            console.log(\"正在安装 babeldoc...\");\n            babelDocInstalled = await (0,_lib_server_utils__WEBPACK_IMPORTED_MODULE_5__.installBabelDoc)();\n            if (!babelDocInstalled) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"安装 babeldoc 失败，请手动安装: pip install babeldoc\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // 解析请求数据\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const targetLang = formData.get(\"targetLang\") || \"zh-CN\";\n        const service = formData.get(\"service\") || \"openai\";\n        const apiKey = formData.get(\"apiKey\") || \"\";\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"未提供文件\"\n            }, {\n                status: 400\n            });\n        }\n        // 创建临时目录\n        const sessionId = (0,uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n        const tempDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(os__WEBPACK_IMPORTED_MODULE_4___default().tmpdir(), \"pdf-translator\", sessionId);\n        await fs__WEBPACK_IMPORTED_MODULE_2__.promises.mkdir(tempDir, {\n            recursive: true\n        });\n        // 保存上传的文件\n        const fileBuffer = Buffer.from(await file.arrayBuffer());\n        const filePath = path__WEBPACK_IMPORTED_MODULE_3___default().join(tempDir, file.name);\n        await fs__WEBPACK_IMPORTED_MODULE_2__.promises.writeFile(filePath, fileBuffer);\n        // 获取 Python 脚本路径\n        const scriptPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"src\", \"app\", \"api\", \"babeldoc-translate\", \"babeldoc-api.py\");\n        // 确保 Python 脚本存在\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_2__.promises.access(scriptPath);\n        } catch (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Python 脚本不存在: ${scriptPath}`\n            }, {\n                status: 500\n            });\n        }\n        // 执行 Python 脚本\n        const command = `python \"${scriptPath}\" \"${filePath}\" --output-dir \"${tempDir}\" --lang-out \"${targetLang}\" --service \"${service}\" --api-key \"${apiKey}\"`;\n        console.log(\"执行命令:\", command);\n        const result = await new Promise((resolve, reject)=>{\n            (0,child_process__WEBPACK_IMPORTED_MODULE_1__.exec)(command, {\n                maxBuffer: 1024 * 1024 * 10\n            }, (error, stdout, stderr)=>{\n                if (error) {\n                    console.error(\"执行 Python 脚本出错:\", error);\n                    reject({\n                        error,\n                        stderr\n                    });\n                } else {\n                    resolve({\n                        stdout,\n                        stderr\n                    });\n                }\n            });\n        }).catch((error)=>{\n            console.error(\"执行 Python 脚本失败:\", error);\n            return {\n                stdout: \"\",\n                stderr: error.stderr || \"执行 Python 脚本失败\"\n            };\n        });\n        // 解析 Python 脚本输出\n        let response;\n        try {\n            response = JSON.parse(result.stdout);\n        } catch (error) {\n            console.error(\"解析 Python 脚本输出失败:\", error);\n            console.error(\"脚本输出:\", result.stdout);\n            console.error(\"脚本错误:\", result.stderr);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"处理 PDF 失败，无法解析脚本输出\",\n                stdout: result.stdout,\n                stderr: result.stderr\n            }, {\n                status: 500\n            });\n        }\n        // 如果处理失败，返回错误信息\n        if (response.error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: response.error,\n                text: response.text\n            }, {\n                status: 500\n            });\n        }\n        // 处理文件路径，转换为可访问的 URL\n        const baseUrl = request.nextUrl.origin;\n        const publicDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"temp\", sessionId);\n        await fs__WEBPACK_IMPORTED_MODULE_2__.promises.mkdir(publicDir, {\n            recursive: true\n        });\n        // 复制生成的文件到公共目录\n        const copyFiles = async ()=>{\n            const files = {\n                monoPdf: response.monoPdfPath,\n                dualPdf: response.dualPdfPath,\n                text: response.textPath\n            };\n            const urls = {};\n            for (const [key, filePath] of Object.entries(files)){\n                if (filePath) {\n                    try {\n                        const fileName = path__WEBPACK_IMPORTED_MODULE_3___default().basename(filePath);\n                        const publicPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(publicDir, fileName);\n                        await fs__WEBPACK_IMPORTED_MODULE_2__.promises.copyFile(filePath, publicPath);\n                        urls[key] = `/temp/${sessionId}/${fileName}`;\n                    } catch (error) {\n                        console.error(`复制文件失败 (${key}):`, error);\n                    }\n                }\n            }\n            return urls;\n        };\n        const fileUrls = await copyFiles();\n        // 返回处理结果\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            originalText: response.originalText || \"\",\n            translatedText: response.translatedText || \"\",\n            sessionId,\n            files: fileUrls\n        });\n    } catch (error) {\n        console.error(\"API 处理出错:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `处理请求时出错: ${error.message || \"未知错误\"}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9iYWJlbGRvYy10cmFuc2xhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ25CO0FBQ0Q7QUFDWjtBQUNKO0FBQ2dCO0FBQzJGO0FBRXhILGVBQWVZLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRix3QkFBd0I7UUFDeEIsTUFBTUMsa0JBQWtCLE1BQU1OLDBFQUF1QkE7UUFDckQsSUFBSSxDQUFDTSxpQkFBaUI7WUFDcEIsT0FBT2QscURBQVlBLENBQUNlLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBbUMsR0FDNUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1DLGVBQWUsTUFBTVQsdUVBQW9CQTtRQUMvQyxJQUFJLENBQUNTLGNBQWM7WUFDakIsT0FBT2xCLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQW1CLEdBQzVCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxvQkFBb0I7UUFDcEIsSUFBSUUsb0JBQW9CLE1BQU1ULDRFQUF5QkE7UUFDdkQsSUFBSSxDQUFDUyxtQkFBbUI7WUFDdEJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaRixvQkFBb0IsTUFBTVIsa0VBQWVBO1lBQ3pDLElBQUksQ0FBQ1EsbUJBQW1CO2dCQUN0QixPQUFPbkIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQTZDLEdBQ3REO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0Y7UUFFQSxTQUFTO1FBQ1QsTUFBTUssV0FBVyxNQUFNVCxRQUFRUyxRQUFRO1FBQ3ZDLE1BQU1DLE9BQU9ELFNBQVNFLEdBQUcsQ0FBQztRQUMxQixNQUFNQyxhQUFhLFNBQVVELEdBQUcsQ0FBQyxpQkFBNEI7UUFDN0QsTUFBTUUsVUFBVSxTQUFVRixHQUFHLENBQUMsY0FBeUI7UUFDdkQsTUFBTUcsU0FBUyxTQUFVSCxHQUFHLENBQUMsYUFBd0I7UUFFckQsSUFBSSxD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QU9oQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPLENBQUMsU0FBUyxFQUFFQSxNQUFNaUUsT0FBTyxJQUFJLE9BQU8sQ0FBQztRQUFDLEdBQy9DO1lBQUVoRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BkZi10cmFuc2xhdG9yLy4vc3JjL2FwcC9hcGkvYmFiZWxkb2MtdHJhbnNsYXRlL3JvdXRlLnRzPzAwODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGV4ZWMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBjaGVja1B5dGhvbkluc3RhbGxhdGlvbiwgY2hlY2tQaXBJbnN0YWxsYXRpb24sIGNoZWNrQmFiZWxEb2NJbnN0YWxsYXRpb24sIGluc3RhbGxCYWJlbERvYyB9IGZyb20gJ0AvbGliL3NlcnZlci11dGlscyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8g5qOA5p+lIFB5dGhvbiDlkowgcGlwIOaYr+WQpuW3suWuieijhVxuICAgIGNvbnN0IHB5dGhvbkluc3RhbGxlZCA9IGF3YWl0IGNoZWNrUHl0aG9uSW5zdGFsbGF0aW9uKCk7XG4gICAgaWYgKCFweXRob25JbnN0YWxsZWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ+acquWuieijhSBQeXRob27vvIzor7flhYjlronoo4UgUHl0aG9uIDMuOCDmiJbmm7Tpq5jniYjmnKwnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwaXBJbnN0YWxsZWQgPSBhd2FpdCBjaGVja1BpcEluc3RhbGxhdGlvbigpO1xuICAgIGlmICghcGlwSW5zdGFsbGVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICfmnKrlronoo4UgcGlw77yM6K+35YWI5a6J6KOFIHBpcCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIOajgOafpSBiYWJlbGRvYyDmmK/lkKblt7Llronoo4VcbiAgICBsZXQgYmFiZWxEb2NJbnN0YWxsZWQgPSBhd2FpdCBjaGVja0JhYmVsRG9jSW5zdGFsbGF0aW9uKCk7XG4gICAgaWYgKCFiYWJlbERvY0luc3RhbGxlZCkge1xuICAgICAgY29uc29sZS5sb2coJ+ato+WcqOWuieijhSBiYWJlbGRvYy4uLicpO1xuICAgICAgYmFiZWxEb2NJbnN0YWxsZWQgPSBhd2FpdCBpbnN0YWxsQmFiZWxEb2MoKTtcbiAgICAgIGlmICghYmFiZWxEb2NJbnN0YWxsZWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICflronoo4UgYmFiZWxkb2Mg5aSx6LSl77yM6K+35omL5Yqo5a6J6KOFOiBwaXAgaW5zdGFsbCBiYWJlbGRvYycgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDop6PmnpDor7fmsYLmlbDmja5cbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdmaWxlJykgYXMgRmlsZTtcbiAgICBjb25zdCB0YXJnZXRMYW5nID0gKGZvcm1EYXRhLmdldCgndGFyZ2V0TGFuZycpIGFzIHN0cmluZykgfHwgJ3poLUNOJztcbiAgICBjb25zdCBzZXJ2aWNlID0gKGZvcm1EYXRhLmdldCgnc2VydmljZScpIGFzIHN0cmluZykgfHwgJ29wZW5haSc7XG4gICAgY29uc3QgYXBpS2V5ID0gKGZvcm1EYXRhLmdldCgnYXBpS2V5JykgYXMgc3RyaW5nKSB8fCAnJztcblxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAn5pyq5o+Q5L6b5paH5Lu2JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g5Yib5bu65Li05pe255uu5b2VXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gdXVpZHY0KCk7XG4gICAgY29uc3QgdGVtcERpciA9IHBhdGguam9pbihvcy50bXBkaXIoKSwgJ3BkZi10cmFuc2xhdG9yJywgc2Vzc2lvbklkKTtcbiAgICBhd2FpdCBmcy5ta2Rpcih0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICAgIC8vIOS/neWtmOS4iuS8oOeahOaWh+S7tlxuICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpO1xuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHRlbXBEaXIsIGZpbGUubmFtZSk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBmaWxlQnVmZmVyKTtcblxuICAgIC8vIOiOt+WPliBQeXRob24g6ISa5pys6Lev5b6EXG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc3JjJywgJ2FwcCcsICdhcGknLCAnYmFiZWxkb2MtdHJhbnNsYXRlJywgJ2JhYmVsZG9jLWFwaS5weScpO1xuXG4gICAgLy8g56Gu5L+dIFB5dGhvbiDohJrmnKzlrZjlnKhcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZnMuYWNjZXNzKHNjcmlwdFBhdGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IGBQeXRob24g6ISa5pys5LiN5a2Y5ZyoOiAke3NjcmlwdFBhdGh9YCB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g5omn6KGMIFB5dGhvbiDohJrmnKxcbiAgICBjb25zdCBjb21tYW5kID0gYHB5dGhvbiBcIiR7c2NyaXB0UGF0aH1cIiBcIiR7ZmlsZVBhdGh9XCIgLS1vdXRwdXQtZGlyIFwiJHt0ZW1wRGlyfVwiIC0tbGFuZy1vdXQgXCIke3RhcmdldExhbmd9XCIgLS1zZXJ2aWNlIFwiJHtzZXJ2aWNlfVwiIC0tYXBpLWtleSBcIiR7YXBpS2V5fVwiYDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn5omn6KGM5ZG95LukOicsIGNvbW1hbmQpO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlPHsgc3Rkb3V0OiBzdHJpbmc7IHN0ZGVycjogc3RyaW5nIH0+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGV4ZWMoY29tbWFuZCwgeyBtYXhCdWZmZXI6IDEwMjQgKiAxMDI0ICogMTAgfSwgKGVycm9yLCBzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmiafooYwgUHl0aG9uIOiEmuacrOWHuumUmTonLCBlcnJvcik7XG4gICAgICAgICAgcmVqZWN0KHsgZXJyb3IsIHN0ZGVyciB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHsgc3Rkb3V0LCBzdGRlcnIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aJp+ihjCBQeXRob24g6ISa5pys5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN0ZG91dDogJycsIHN0ZGVycjogZXJyb3Iuc3RkZXJyIHx8ICfmiafooYwgUHl0aG9uIOiEmuacrOWksei0pScgfTtcbiAgICB9KTtcblxuICAgIC8vIOino+aekCBQeXRob24g6ISa5pys6L6T5Ye6XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzdWx0LnN0ZG91dCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+ino+aekCBQeXRob24g6ISa5pys6L6T5Ye65aSx6LSlOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iEmuacrOi+k+WHujonLCByZXN1bHQuc3Rkb3V0KTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iEmuacrOmUmeivrzonLCByZXN1bHQuc3RkZXJyKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAn5aSE55CGIFBERiDlpLHotKXvvIzml6Dms5Xop6PmnpDohJrmnKzovpPlh7onLFxuICAgICAgICAgIHN0ZG91dDogcmVzdWx0LnN0ZG91dCxcbiAgICAgICAgICBzdGRlcnI6IHJlc3VsdC5zdGRlcnJcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIOWmguaenOWkhOeQhuWksei0pe+8jOi/lOWbnumUmeivr+S/oeaBr1xuICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiByZXNwb25zZS5lcnJvciwgdGV4dDogcmVzcG9uc2UudGV4dCB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8g5aSE55CG5paH5Lu26Lev5b6E77yM6L2s5o2i5Li65Y+v6K6/6Zeu55qEIFVSTFxuICAgIGNvbnN0IGJhc2VVcmwgPSByZXF1ZXN0Lm5leHRVcmwub3JpZ2luO1xuICAgIGNvbnN0IHB1YmxpY0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3RlbXAnLCBzZXNzaW9uSWQpO1xuICAgIGF3YWl0IGZzLm1rZGlyKHB1YmxpY0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG5cbiAgICAvLyDlpI3liLbnlJ/miJDnmoTmlofku7bliLDlhazlhbHnm67lvZVcbiAgICBjb25zdCBjb3B5RmlsZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlcyA9IHtcbiAgICAgICAgbW9ub1BkZjogcmVzcG9uc2UubW9ub1BkZlBhdGgsXG4gICAgICAgIGR1YWxQZGY6IHJlc3BvbnNlLmR1YWxQZGZQYXRoLFxuICAgICAgICB0ZXh0OiByZXNwb25zZS50ZXh0UGF0aFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXJsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGZpbGVQYXRoXSBvZiBPYmplY3QuZW50cmllcyhmaWxlcykpIHtcbiAgICAgICAgaWYgKGZpbGVQYXRoKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGF0aC5iYXNlbmFtZShmaWxlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBwdWJsaWNQYXRoID0gcGF0aC5qb2luKHB1YmxpY0RpciwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgYXdhaXQgZnMuY29weUZpbGUoZmlsZVBhdGgsIHB1YmxpY1BhdGgpO1xuICAgICAgICAgICAgdXJsc1trZXldID0gYC90ZW1wLyR7c2Vzc2lvbklkfS8ke2ZpbGVOYW1lfWA7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOWkjeWItuaWh+S7tuWksei0pSAoJHtrZXl9KTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1cmxzO1xuICAgIH07XG5cbiAgICBjb25zdCBmaWxlVXJscyA9IGF3YWl0IGNvcHlGaWxlcygpO1xuXG4gICAgLy8g6L+U5Zue5aSE55CG57uT5p6cXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBvcmlnaW5hbFRleHQ6IHJlc3BvbnNlLm9yaWdpbmFsVGV4dCB8fCAnJyxcbiAgICAgIHRyYW5zbGF0ZWRUZXh0OiByZXNwb25zZS50cmFuc2xhdGVkVGV4dCB8fCAnJyxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIGZpbGVzOiBmaWxlVXJsc1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkg5aSE55CG5Ye66ZSZOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBg5aSE55CG6K+35rGC5pe25Ye66ZSZOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ+acquefpemUmeivryd9YCB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZXhlYyIsInByb21pc2VzIiwiZnMiLCJwYXRoIiwib3MiLCJ2NCIsInV1aWR2NCIsImNoZWNrUHl0aG9uSW5zdGFsbGF0aW9uIiwiY2hlY2tQaXBJbnN0YWxsYXRpb24iLCJjaGVja0JhYmVsRG9jSW5zdGFsbGF0aW9uIiwiaW5zdGFsbEJhYmVsRG9jIiwiUE9TVCIsInJlcXVlc3QiLCJweXRob25JbnN0YWxsZWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJwaXBJbnN0YWxsZWQiLCJiYWJlbERvY0luc3RhbGxlZCIsImNvbnNvbGUiLCJsb2ciLCJmb3JtRGF0YSIsImZpbGUiLCJnZXQiLCJ0YXJnZXRMYW5nIiwic2VydmljZSIsImFwaUtleSIsInNlc3Npb25JZCIsInRlbXBEaXIiLCJqb2luIiwidG1wZGlyIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJmaWxlQnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIiwiZmlsZVBhdGgiLCJuYW1lIiwid3JpdGVGaWxlIiwic2NyaXB0UGF0aCIsInByb2Nlc3MiLCJjd2QiLCJhY2Nlc3MiLCJjb21tYW5kIiwicmVzdWx0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtYXhCdWZmZXIiLCJzdGRvdXQiLCJzdGRlcnIiLCJjYXRjaCIsInJlc3BvbnNlIiwiSlNPTiIsInBhcnNlIiwidGV4dCIsImJhc2VVcmwiLCJuZXh0VXJsIiwib3JpZ2luIiwicHVibGljRGlyIiwiY29weUZpbGVzIiwiZmlsZXMiLCJtb25vUGRmIiwibW9ub1BkZlBhdGgiLCJkdWFsUGRmIiwiZHVhbFBkZlBhdGgiLCJ0ZXh0UGF0aCIsInVybHMiLCJrZXkiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsZU5hbWUiLCJiYXNlbmFtZSIsInB1YmxpY1BhdGgiLCJjb3B5RmlsZSIsImZpbGVVcmxzIiwic3VjY2VzcyIsIm9yaWdpbmFsVGV4dCIsInRyYW5zbGF0ZWRUZXh0IiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/babeldoc-translate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/server-utils.ts":
/*!*********************************!*\
  !*** ./src/lib/server-utils.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkBabelDocInstallation: () => (/* binding */ checkBabelDocInstallation),\n/* harmony export */   checkPipInstallation: () => (/* binding */ checkPipInstallation),\n/* harmony export */   checkPythonInstallation: () => (/* binding */ checkPythonInstallation),\n/* harmony export */   installBabelDoc: () => (/* binding */ installBabelDoc)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\n * 检查 Python 是否已安装\n */ function checkPythonInstallation() {\n    return new Promise((resolve)=>{\n        (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"python --version\", (error)=>{\n            if (error) {\n                // 尝试 python3 命令\n                (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"python3 --version\", (error2)=>{\n                    if (error2) {\n                        resolve(false);\n                    } else {\n                        resolve(true);\n                    }\n                });\n            } else {\n                resolve(true);\n            }\n        });\n    });\n}\n/**\n * 检查 pip 是否已安装\n */ function checkPipInstallation() {\n    return new Promise((resolve)=>{\n        (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"pip --version\", (error)=>{\n            if (error) {\n                // 尝试 pip3 命令\n                (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"pip3 --version\", (error2)=>{\n                    if (error2) {\n                        resolve(false);\n                    } else {\n                        resolve(true);\n                    }\n                });\n            } else {\n                resolve(true);\n            }\n        });\n    });\n}\n/**\n * 检查 babeldoc 是否已安装\n */ function checkBabelDocInstallation() {\n    return new Promise((resolve)=>{\n        (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"pip list | grep babeldoc\", (error, stdout)=>{\n            if (error || !stdout.includes(\"babeldoc\")) {\n                resolve(false);\n            } else {\n                resolve(true);\n            }\n        });\n    });\n}\n/**\n * 安装 babeldoc\n */ function installBabelDoc() {\n    return new Promise((resolve)=>{\n        (0,child_process__WEBPACK_IMPORTED_MODULE_0__.exec)(\"pip install babeldoc\", (error)=>{\n            if (error) {\n                console.error(\"安装 babeldoc 失败:\", error);\n                resolve(false);\n            } else {\n                resolve(true);\n            }\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlcnZlci11dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFFckM7O0NBRUMsR0FDTSxTQUFTQztJQUNkLE9BQU8sSUFBSUMsUUFBUSxDQUFDQztRQUNsQkgsbURBQUlBLENBQUMsb0JBQW9CLENBQUNJO1lBQ3hCLElBQUlBLE9BQU87Z0JBQ1QsZ0JBQWdCO2dCQUNoQkosbURBQUlBLENBQUMscUJBQXFCLENBQUNLO29CQUN6QixJQUFJQSxRQUFRO3dCQUNWRixRQUFRO29CQUNWLE9BQU87d0JBQ0xBLFFBQVE7b0JBQ1Y7Z0JBQ0Y7WUFDRixPQUFPO2dCQUNMQSxRQUFRO1lBQ1Y7UUFDRjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHO0lBQ2QsT0FBTyxJQUFJSixRQUFRLENBQUNDO1FBQ2xCSCxtREFBSUEsQ0FBQyxpQkFBaUIsQ0FBQ0k7WUFDckIsSUFBSUEsT0FBTztnQkFDVCxhQUFhO2dCQUNiSixtREFBSUEsQ0FBQyxrQkFBa0IsQ0FBQ0s7b0JBQ3RCLElBQUlBLFFBQVE7d0JBQ1ZGLFFBQVE7b0JBQ1YsT0FBTzt3QkFDTEEsUUFBUTtvQkFDVjtnQkFDRjtZQUNGLE9BQU87Z0JBQ0xBLFFBQVE7WUFDVjtRQUNGO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0k7SUFDZCxPQUFPLElBQUlMLFFBQVEsQ0FBQ0M7UUFDbEJILG1EQUFJQSxDQUFDLDRCQUE0QixDQUFDSSxPQUFPSTtZQUN2QyxJQUFJSixTQUFTLENBQUNJLE9BQU9DLFFBQVEsQ0FBQyxhQUFhO2dCQUN6Q04sUUFBUTtZQUNWLE9BQU87Z0JBQ0xBLFFBQVE7WUFDVjtRQUNGO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU087SUFDZCxPQUFPLElBQUlSLFFBQVEsQ0FBQ0M7UUFDbEJILG1EQUFJQSxDQUFDLHdCQUF3QixDQUFDSTtZQUM1QixJQUFJQSxPQUFPO2dCQUNUTyxRQUFRUCxLQUFLLENBQUMsbUJBQW1CQTtnQkFDakNELFFBQVE7WUFDVixPQUFPO2dCQUNMQSxRQUFRO1lBQ1Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZGYtdHJhbnNsYXRvci8uL3NyYy9saWIvc2VydmVyLXV0aWxzLnRzPzdiOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuXG4vKipcbiAqIOajgOafpSBQeXRob24g5piv5ZCm5bey5a6J6KOFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1B5dGhvbkluc3RhbGxhdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgZXhlYygncHl0aG9uIC0tdmVyc2lvbicsIChlcnJvcikgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIC8vIOWwneivlSBweXRob24zIOWRveS7pFxuICAgICAgICBleGVjKCdweXRob24zIC0tdmVyc2lvbicsIChlcnJvcjIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IyKSB7XG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICog5qOA5p+lIHBpcCDmmK/lkKblt7Llronoo4VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUGlwSW5zdGFsbGF0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBleGVjKCdwaXAgLS12ZXJzaW9uJywgKGVycm9yKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgLy8g5bCd6K+VIHBpcDMg5ZG95LukXG4gICAgICAgIGV4ZWMoJ3BpcDMgLS12ZXJzaW9uJywgKGVycm9yMikgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcjIpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiDmo4Dmn6UgYmFiZWxkb2Mg5piv5ZCm5bey5a6J6KOFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0JhYmVsRG9jSW5zdGFsbGF0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBleGVjKCdwaXAgbGlzdCB8IGdyZXAgYmFiZWxkb2MnLCAoZXJyb3IsIHN0ZG91dCkgPT4ge1xuICAgICAgaWYgKGVycm9yIHx8ICFzdGRvdXQuaW5jbHVkZXMoJ2JhYmVsZG9jJykpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiDlronoo4UgYmFiZWxkb2NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxCYWJlbERvYygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgZXhlYygncGlwIGluc3RhbGwgYmFiZWxkb2MnLCAoZXJyb3IpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCflronoo4UgYmFiZWxkb2Mg5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0gIl0sIm5hbWVzIjpbImV4ZWMiLCJjaGVja1B5dGhvbkluc3RhbGxhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiZXJyb3IiLCJlcnJvcjIiLCJjaGVja1BpcEluc3RhbGxhdGlvbiIsImNoZWNrQmFiZWxEb2NJbnN0YWxsYXRpb24iLCJzdGRvdXQiLCJpbmNsdWRlcyIsImluc3RhbGxCYWJlbERvYyIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/server-utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbabeldoc-translate%2Froute&page=%2Fapi%2Fbabeldoc-translate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbabeldoc-translate%2Froute.ts&appDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjobssu%2FDesktop%2Fmyhos%2Fpdf-translator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();